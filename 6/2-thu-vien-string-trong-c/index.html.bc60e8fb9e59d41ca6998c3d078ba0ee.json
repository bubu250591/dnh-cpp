{"head":{"title":"6.2 Thư viện string trong C++","route":"6/2-thu-vien-string-trong-c","id":30092,"description":"//......... string my_string; string temp_string(\"What the hell is going on?\"); string one_more = temp_string; string…"},"body":"<html><head></head><body><h4>Chào các bạn học viên đang theo dõi khóa học lập trinh trực tuyến ngôn ngữ C++.</h4>\n\n<p>Trong những bài học trước, mình đã hướng dẫn các bạn thực hiện một số thao tác đơn giản với <strong>C-style string</strong>, hay còn gọi là mảng kí tự.</p>\n\n<p>Để thao tác với mảng kí tự, chúng ta cần include thư viện <strong>cstring</strong> vào chương trình để được cung cấp một số hàm sẵn có. Tuy vậy, việc xử lý mảng kí tự vẫn còn nhiều khó khăn. Một ví dụ điển hình là việc bạn thực hiện nối chuỗi kí tự bằng hàm <strong>strcat</strong>. Bạn luôn phải để tâm đến việc số lượng ô nhớ mà bạn đã cấp phát cho mảng kí tự có đủ để chứa thêm chuỗi kí tự được nối vào không. Hay là khi bạn khai báo một mảng kí tự, bạn cũng phải đặt ra câu hỏi: <em>Liệu bao nhiêu ô nhớ là đủ?</em> Và bạn phải luôn đặt kí tự '<strong>\\0</strong>' tại vị trí kết thúc chuỗi kí tự... Quá nhiều thứ khiến bạn phải để tâm.</p>\n\n<p>Trong bài học hôm nay, mình sẽ giới thiệu với các bạn về kiểu dữ liệu <strong>string</strong> được định nghĩa trong thư viện <strong>string</strong> của ngôn ngữ C++ (các bạn đừng nhầm lẫn giữa thư viện <strong>cstring</strong> của ngôn ngữ C với thư viện <strong>string</strong> của ngôn ngữ C++, hai thư viện này hoàn toàn riêng biệt).</p>\n\n<p>Các bạn có thể làm được gì với thư viện <strong>string</strong> mà ngôn ngữ C++ cung cấp? Trước hết, chúng ta hãy cùng xem thư viện <strong>string</strong> là gì, và nó chứa những gì bên trong.</p>\n\n<h3>Cpp-Style string</h3>\n\n<p>Mình tạm gọi là <strong>Cpp-style string</strong> để tiện phân biệt với <strong>C-style string</strong> mà các bạn đã học trong một số bài học trước.</p>\n\n<p><strong>string</strong> là một lớp chuẩn mô tả về về chuỗi kí tự, nó cung cấp khả năng lưu trữ chuỗi kí tự gọi là <strong>standard container</strong>, và thêm vào đó một số chi tiết được thiết kế để xử lý chuỗi kí tự mà nó đang lưu trữ.</p>\n\n<p><img src=\"https://github.com/nguyenchiemminhvu/CPP-Tutorial/blob/master/6-kieu-chuoi-ki-tu/6-2-thu-vien-string-trong-CPP/0.png?raw=true\" width=\"\" height=\"\"></p>\n\n<blockquote><p>Một ưu điểm mà lớp <strong>string</strong> đem lại cho chúng ta là <strong>standard container</strong> có thể tự thay đổi kích thước vùng nhớ cho phù hợp với yêu cầu về mặt lưu trữ chuỗi kí tự. Do đó, các bạn có thể tùy ý nối hoặc chèn thêm dữ liệu vào <strong>standard container</strong> cho đến khi dung lượng bộ nhớ không đủ để cung cấp nữa.</p></blockquote>\n\n<h5>Khai báo và khởi tạo</h5>\n\n<p>Tương tự như cách chúng ta khai báo biến thông thường, kiểu dữ liệu sẽ được dùng trong bài học này là <strong>string</strong> (Các bạn cần include thư viện <strong>string</strong> vào trước khi sử dụng).</p>\n\n<pre><code class=\"hljs language-cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&#x3C;string></span></span>\n<span class=\"hljs-keyword\">using</span> <span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-built_in\">std</span>;\n\n<span class=\"hljs-comment\">//.........</span>\n<span class=\"hljs-built_in\">string</span> my_string;</code></pre>\n\n<p>Lớp <strong>string</strong> cũng được đặt trong <strong>namespace std</strong> nên dòng lệnh <code>using namespace std</code> là cần thiết.</p>\n\n<p>Vậy là chúng ta đã khai báo được một đối tượng có tên là <code>my_string</code> từ lớp <strong>string</strong>. Các bạn có thể khởi tạo chuỗi kí tự cho đối tượng tại thời điểm khai báo bằng một số cách như sau:</p>\n\n<pre><code class=\"hljs language-cpp\"><span class=\"hljs-function\"><span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">empty_string</span><span class=\"hljs-params\">()</span></span>;\n<span class=\"hljs-built_in\">string</span> my_string = <span class=\"hljs-string\">\"Learning C++ is easy\"</span>;\n<span class=\"hljs-function\"><span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">another_string</span><span class=\"hljs-params\">(<span class=\"hljs-string\">\"Don't give it up\"</span>)</span></span>;\n\n<span class=\"hljs-function\"><span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">temp_string</span><span class=\"hljs-params\">(<span class=\"hljs-string\">\"What the hell is going on?\"</span>)</span></span>;\n<span class=\"hljs-built_in\">string</span> one_more = temp_string;\n<span class=\"hljs-function\"><span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">it_just_began</span><span class=\"hljs-params\">(temp_string)</span></span>;</code></pre>\n\n<p>Chúng ta có thể khởi tạo bằng cách gán cho đối tượng một chuỗi kí tự thông qua toán tử gán <strong>'='</strong> hoặc lấy chuỗi kí tự từ một đối tượng của lớp <strong>string</strong> khác, và còn nhiều cách nữa.</p>\n\n<h5>string input &#x26; output</h5>\n\n<ul>\n<li>\n<p>Output:</p>\n<p>Để đưa dữ liệu bên trong <strong>standard container</strong> của <strong>string</strong> ra màn hình console, chúng ta sử đụng đối tượng <strong>cout</strong> như cách chúng ta vẫn thường dùng, chỉ cần sử dụng tên biến của đối tượng string.</p>\n<pre><code class=\"hljs language-cpp\"><span class=\"hljs-built_in\">string</span> output_string = <span class=\"hljs-string\">\"I'm learning C++ programming language\"</span>;\n<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; output_string &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;</code></pre>\n</li>\n<li>\n<p>Input:</p>\n<p>Chúng ta có thể sử dụng đối tượng <strong>cin</strong> để nhập dữ liệu vào từ bàn phím cho những đối tượng của lớp <strong>string</strong>.</p>\n<pre><code class=\"hljs language-abnf\">string input_string<span class=\"hljs-comment\">;</span>\ncout &#x3C;&#x3C; <span class=\"hljs-string\">\"Please enter your command: \"</span><span class=\"hljs-comment\">;</span>\ncin >> input_string<span class=\"hljs-comment\">;</span></code></pre>\n<p>Với cách nhập dữ liệu này, chúng ta lại gặp phải trường hợp dữ liệu truyền vào <strong>string</strong> bị dừng khi gặp kí tự khoảng trắng.</p>\n<p><img src=\"https://github.com/nguyenchiemminhvu/CPP-Tutorial/blob/master/6-kieu-chuoi-ki-tu/6-2-thu-vien-string-trong-CPP/1.png?raw=true\" width=\"\" height=\"\"></p>\n<p>Trong một số trường hợp, chúng ta chỉ yêu cầu người dùng nhập 1 từ thì có thể sử dụng đối tượng <strong>cin</strong> như cách trên, ví dụ:</p>\n<pre><code class=\"hljs language-cpp\"><span class=\"hljs-built_in\">string</span> command;\n\n<span class=\"hljs-keyword\">do</span>\n{\n\t<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"Enter \\\"new\\\" to create a new file.\"</span> &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;\n\t<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"Enter \\\"cancel\\\" to discard the previous behavior.\"</span> &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;\n\t<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"Enter \\\"quit\\\" to exit the program.\"</span> &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;\n\n\t<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"=============================================\"</span> &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;\n\t<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"Enter your command: \"</span>;\n\t<span class=\"hljs-built_in\">cin</span> >> command;\n\t<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"=============================================\"</span> &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;\n\n\t<span class=\"hljs-comment\">//do something depend on the command</span>\n\n} <span class=\"hljs-keyword\">while</span> (<span class=\"hljs-literal\">true</span>);</code></pre>\n<p>Nhưng trong một số trường hợp, chúng ta cần <strong>string</strong> nhận vào kí tự khoảng trắng, ví dụ khi nhập họ tên đầy đủ, thì chúng ta cần có một cách khác.</p>\n<p>Để khắc phục trường hợp string không nhận kí tự khoảng trắng, chúng ta sử dụng hàm <strong>getline</strong> được định nghĩa bên trong thư viện <strong>string</strong>.</p>\n<pre><code class=\"hljs language-applescript\"><span class=\"hljs-built_in\">string</span> <span class=\"hljs-built_in\">name</span>;\ncout &#x3C;&#x3C; <span class=\"hljs-string\">\"Enter your full name: \"</span>;\ngetline( cin, <span class=\"hljs-built_in\">name</span> );</code></pre>\n<p>Mình truyền vào <strong>getline</strong> đối tượng <strong>cin</strong> để nhận dữ liệu từ bàn phím, khi cần nhận dữ liệu từ file thì mình sẽ truyền vào đối số đầu tiên một đối tượng có kiểu file stream (phần này các bạn sẽ được học sau).</p>\n<p>Bây giờ thì chúng ta có thể nhập dữ liệu mà không bị giới hạn bởi kí tự khoảng trắng nữa.</p>\n<p><img src=\"https://github.com/nguyenchiemminhvu/CPP-Tutorial/blob/master/6-kieu-chuoi-ki-tu/6-2-thu-vien-string-trong-CPP/2.png?raw=true\" width=\"\" height=\"\"></p>\n<p>Hàm getline mặc định xem kí tự <strong>'\\n'</strong> được tạo ra khi nhấn phím Enter là kí tự kết thúc nhập dữ liệu cho <strong>string</strong>. Chúng ta có thể thay đổi điều này.</p>\n<p>Hàm <strong>getline</strong> có thể nhận thêm đối số thứ 3 đại diện cho kí tự kết thúc nhập dữ liệu cho <strong>string</strong>. Ví dụ:</p>\n<pre><code class=\"hljs language-cpp\"><span class=\"hljs-built_in\">string</span> str;\n<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"Enter a string (end by a dot): \"</span> &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;\ngetline(<span class=\"hljs-built_in\">cin</span>, str, <span class=\"hljs-string\">'.'</span>);\n\n<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; str &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;</code></pre>\n<p>Đoạn chương trình trên khiến chương trình dừng lại và chờ cho đến khi quá trình nhập dữ liệu của bạn kết thúc, nó chỉ kết thúc khi phát hiện dấu chấm.</p>\n<p><img src=\"https://github.com/nguyenchiemminhvu/CPP-Tutorial/blob/master/6-kieu-chuoi-ki-tu/6-2-thu-vien-string-trong-CPP/3.png?raw=true\" width=\"\" height=\"\"></p>\n</li>\n</ul>\n\n<h3>String manipulating</h3>\n\n<p>Mình vừa hướng dẫn các bạn cách khai báo mà sử dụng kiểu dữ liệu <strong>string</strong> của ngôn ngữ C++, tiếp theo là phần thao tác với <strong>standard container</strong> của một đối tượng <strong>string</strong>.</p>\n\n<h5>Tính độ dài chuỗi kí tự được lưu trong standard container</h5>\n\n<p>Lớp string định nghĩa cho chúng ta 2 phương thức để thực hiện việc lấy ra độ dài của chuỗi kí tự được lưu trong <strong>standard container</strong>.</p>\n\n<pre><code class=\"hljs language-cpp\"><span class=\"hljs-built_in\">string</span> my_favorite_quote = <span class=\"hljs-string\">\"By my will, this shall be finished\"</span>;\n\n<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"Length of the quote: \"</span> &#x3C;&#x3C; my_favorite_quote.length() &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;\n<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"Length of the quote: \"</span> &#x3C;&#x3C; my_favorite_quote.size() &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;</code></pre>\n\n<p>Hai phương thức <strong>length</strong> và <strong>size</strong> của lớp <strong>string</strong> đều được dùng để tính độ dài của chuỗi kí tự trong <strong>standard container</strong>.</p>\n\n<p>Khi <strong>string</strong> có độ dài chuỗi kí tự là 0, nó được xem là <strong>string</strong> rỗng. Để kiểm tra xem <strong>string</strong> có rỗng hay không, chúng ta sử dụng phương thức <strong>empty</strong>, phương thức này trả về giá trị <strong>true</strong> khi <strong>string</strong> rỗng, ngược lại, trả về giá trị <strong>false</strong>.</p>\n\n<pre><code class=\"hljs language-cpp\"><span class=\"hljs-built_in\">string</span> empty_string = <span class=\"hljs-string\">\"\"</span>;\n<span class=\"hljs-keyword\">if</span>(empty_string.empty())\n\t<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"string is empty\"</span> &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;</code></pre>\n\n<p>Chúng ta cũng có thể làm một <strong>string</strong> có chứa dữ liệu trở thành <strong>string</strong> rỗng bằng phương thức <strong>clear</strong>.</p>\n\n<pre><code class=\"hljs language-processing\">string <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-string\">\"This is a sample string\"</span>.\n<span class=\"hljs-built_in\">str</span>.<span class=\"hljs-built_in\">clear</span>();\n\n<span class=\"hljs-keyword\">if</span>(<span class=\"hljs-built_in\">str</span>.empty())\n\tcout &#x3C;&#x3C; <span class=\"hljs-string\">\"str is now empty\"</span> &#x3C;&#x3C; endl;</code></pre>\n\n<h5>Truy cập phần tử trong string</h5>\n\n<p>Cũng tương tự như việc truy cập phần tử trong mảng kí tự, chúng ta sử dụng cặp dấu ngoặc vuông và truyền vào một giá trị số nguyên đại diện cho chỉ số của phần tử cần truy xuất.</p>\n\n<pre><code class=\"hljs language-axapta\">string <span class=\"hljs-keyword\">str</span> = <span class=\"hljs-string\">\"Learn from others people\"</span>;\n\n<span class=\"hljs-keyword\">for</span>(int32_t <span class=\"hljs-keyword\">index</span> = <span class=\"hljs-number\">0</span>; <span class=\"hljs-keyword\">index</span> &#x3C;= <span class=\"hljs-keyword\">str</span>.length() - <span class=\"hljs-number\">1</span>; <span class=\"hljs-keyword\">index</span>++)\t{\n\tcout &#x3C;&#x3C; <span class=\"hljs-keyword\">str</span>[<span class=\"hljs-keyword\">index</span>] &#x3C;&#x3C; <span class=\"hljs-string\">\" \"</span>;\n}\n\ncout &#x3C;&#x3C; endl;\n\n<span class=\"hljs-keyword\">for</span>(int32_t <span class=\"hljs-keyword\">index</span> = <span class=\"hljs-number\">0</span>; <span class=\"hljs-keyword\">index</span> &#x3C;= <span class=\"hljs-keyword\">str</span>.length() - <span class=\"hljs-number\">1</span>; <span class=\"hljs-keyword\">index</span>++)\t{\n\tcout &#x3C;&#x3C; <span class=\"hljs-keyword\">str</span>.at(<span class=\"hljs-keyword\">index</span>) &#x3C;&#x3C; <span class=\"hljs-string\">\" \"</span>;\n}</code></pre>\n\n<p>Phương thức <strong>at</strong> của lớp <strong>string</strong> cũng thực hiện truy xuất đến phần tử có chỉ số index tương tự cặp dấu ngoặc vuông.</p>\n\n<p>Nếu chương trình phát hiện hành vi truy xuất đến phần tử có chỉ số không hợp lệ <code>(index &#x3C; 0 hoặc index >= string length)</code>, <strong>Assertion</strong> sẽ ép buộc chương trình kết thúc và thông báo dòng lệnh gây ra lỗi cho bạn.</p>\n\n<p>2 cách truy cập phần tử trên được dùng để truy xuất phần tử có chỉ số không cố định. Lớp tring còn cung cấp cho chúng ta 2 phương thức để truy xuất nhanh đến phần tử đầu tiên và phần tử cuối cùng của chuỗi kí tự trong <strong>standard container</strong>.</p>\n\n<pre><code class=\"hljs language-cpp\"><span class=\"hljs-built_in\">string</span> sample = <span class=\"hljs-string\">\"Access to the first and the last element\"</span>;\n<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"First: \"</span> &#x3C;&#x3C; sample.front() &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;\n<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"Last: \"</span> &#x3C;&#x3C; sample.back() &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;</code></pre>\n\n<p><strong>Assertion</strong> đặt trong 2 phương thức <strong>front</strong> và <strong>back</strong> sẽ được kích hoạt nếu <strong>string</strong> rỗng.</p>\n\n<h5>Thay đổi dữ liệu trong string</h5>\n\n<p>Có khá nhiều phương thức được lớp <strong>string</strong> định nghĩa dùng để thay đổi dữ liệu trong <strong>standard container</strong>.</p>\n\n<ul>\n<li>\n<p>Nối thêm 1 kí tự vào sau <strong>string</strong>:</p>\n<p>Chúng ta chỉ cần truyền vào phương thức <strong>push_back</strong> kí tự mà chúng ta muốn thêm vào sau chuỗi kí tự trong <strong>standard container</strong>.</p>\n<pre><code class=\"hljs language-axapta\">string <span class=\"hljs-keyword\">str</span> = <span class=\"hljs-string\">\"A sentence must end with a dot\"</span>;\n<span class=\"hljs-keyword\">str</span>.push_back(<span class=\"hljs-string\">'.'</span>);</code></pre>\n</li>\n<li>\n<p>Xóa phần tử cuối cùng của <strong>string</strong>:</p>\n<p>Ngược lại với phương thức <code>push_back</code> ở trên, phương thức <code>pop_back</code> xóa đi kí tự cuối cùng trong <strong>string</strong>. Nếu các bạn thực hiện phương thức này khi <strong>string</strong> rỗng, chương trình sẽ gây ra lỗi xung đột vùng nhớ, vì thế, các bạn cần kiểm tra trước khi xóa.</p>\n<pre><code class=\"hljs language-axapta\">string <span class=\"hljs-keyword\">str</span> = <span class=\"hljs-string\">\"The dot will be removed.\"</span>;\n<span class=\"hljs-keyword\">if</span>(!<span class=\"hljs-keyword\">str</span>.empty())\n\t<span class=\"hljs-keyword\">str</span>.pop_back();</code></pre>\n</li>\n<li>\n<p>Nối chuỗi kí tự vào sau <strong>string</strong>:</p>\n<p>Chúng ta có thể sử dụng phương thức <strong>append</strong> của lớp <strong>string</strong> để nối thêm một chuỗi kí tự vào sau chuỗi kí tự trong <strong>standard container</strong>.</p>\n<p><code>string&#x26; append (const string&#x26; str);</code></p>\n<p><code>string&#x26; append (const char* s);</code></p>\n<p>Các bạn có thể truyền vào phương thức <strong>append</strong> một đối tượng có kiểu string hoặc tên của một mảng kí tự nào đó.</p>\n<pre><code class=\"hljs language-processing\">string <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-string\">\"\"</span>;\n<span class=\"hljs-built_in\">str</span>.<span class=\"hljs-built_in\">append</span>(<span class=\"hljs-string\">\"Le\"</span>);\n<span class=\"hljs-built_in\">str</span>.<span class=\"hljs-built_in\">append</span>(<span class=\"hljs-string\">\" \"</span>);\n<span class=\"hljs-built_in\">str</span>.<span class=\"hljs-built_in\">append</span>(<span class=\"hljs-string\">\"Tran\"</span>);\n<span class=\"hljs-built_in\">str</span>.<span class=\"hljs-built_in\">append</span>(<span class=\"hljs-string\">\" Dat\"</span>);</code></pre>\n<p>Bên cạnh đó, lớp <strong>string</strong> cũng đã định nghĩa lại toán tử nối chuỗi kí tự giúp chúng ta tiết kiệm thời gian viết code hơn.</p>\n<pre><code class=\"hljs language-armasm\"><span class=\"hljs-keyword\">string </span><span class=\"hljs-keyword\">str </span>= <span class=\"hljs-string\">\"\"</span><span class=\"hljs-comment\">;</span>\n<span class=\"hljs-keyword\">str </span>+= <span class=\"hljs-string\">\"Use \\\"+=\\\" operator \"</span><span class=\"hljs-comment\">;</span>\n<span class=\"hljs-keyword\">str </span>+= <span class=\"hljs-string\">\"to append string\"</span><span class=\"hljs-comment\">;</span></code></pre>\n<p>Toán tử <strong>'+='</strong> có chức năng hoàn toàn giống với phương thức <strong>append</strong>.</p>\n</li>\n<li>\n<p>Chèn một <strong>string</strong> vào vị trí bất kì trong <strong>string</strong>:</p>\n<p>Phương thức insert có thể giúp chúng ta chèn một <strong>string</strong> vào vị trí pos.</p>\n<p><code>string&#x26; insert (size_t pos, const string&#x26; str);</code></p>\n<p>Ví dụ:</p>\n<pre><code class=\"hljs language-armasm\"><span class=\"hljs-keyword\">string </span><span class=\"hljs-keyword\">str </span>= <span class=\"hljs-string\">\"how to use.\"</span><span class=\"hljs-comment\">;</span>\n<span class=\"hljs-keyword\">string </span><span class=\"hljs-keyword\">str2 </span>= <span class=\"hljs-string\">\"i will introduce you \"</span><span class=\"hljs-comment\">;</span>\n\n<span class=\"hljs-symbol\">cout</span> &#x3C;&#x3C; <span class=\"hljs-keyword\">str </span>&#x3C;&#x3C; endl<span class=\"hljs-comment\">;</span>\n\n<span class=\"hljs-keyword\">str.insert(0, </span><span class=\"hljs-keyword\">str2);\n</span><span class=\"hljs-symbol\">cout</span> &#x3C;&#x3C; <span class=\"hljs-keyword\">str </span>&#x3C;&#x3C; endl<span class=\"hljs-comment\">;</span>\n\n<span class=\"hljs-keyword\">str.insert(str.length() </span>- <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">\" string in C++\"</span>)<span class=\"hljs-comment\">;</span>\n<span class=\"hljs-symbol\">cout</span> &#x3C;&#x3C; <span class=\"hljs-keyword\">str </span>&#x3C;&#x3C; endl<span class=\"hljs-comment\">;</span></code></pre>\n<p>Trong lần sử dụng phương thức <strong>insert</strong> đầu tiên, mình chèn <strong>str2</strong> vào <strong>str</strong> tại vị trí đầu tiên. Sau đó, mình chèn thêm một chuỗi kí tự tại vị trí <code>str.length() - 1</code> (trước dấu chấm kết thúc câu).</p>\n<p><em>Sử dụng phương thức <strong>insert</strong> với vị trí chèn không hợp lệ sẽ gây ra lỗi xung đột vùng nhớ.</em></p>\n</li>\n<li>\n<p>Thay thế một phần của <strong>string</strong>:</p>\n<p>Chắc các bạn cũng có thể đoán được tên của phương thức mà mình chuẩn bị nói tới. Phương thức <strong>replace</strong> dùng để thay thế một đoạn con của chuỗi kí tự lưu trong <strong>standard container</strong> bằng 1 string hoặc 1 mảng kí tự khác.</p>\n<pre><code class=\"hljs language-sql\">string&#x26; <span class=\"hljs-keyword\">replace</span> (<span class=\"hljs-keyword\">size_t</span> pos,  <span class=\"hljs-keyword\">size_t</span> <span class=\"hljs-keyword\">len</span>,  const <span class=\"hljs-keyword\">string</span>&#x26; <span class=\"hljs-keyword\">str</span>);\nstring&#x26; <span class=\"hljs-keyword\">replace</span> (<span class=\"hljs-keyword\">size_t</span> pos,  <span class=\"hljs-keyword\">size_t</span> <span class=\"hljs-keyword\">len</span>,  const <span class=\"hljs-built_in\">char</span>* s);</code></pre>\n<p>Ở trên đây là 2 cách mà chúng ta thường dùng. Trong đó, <strong>pos</strong> là vị trí trong <strong>standard container</strong> mà bạn muốn thực hiện thay thế, <strong>len</strong> là số lượng kí tự trong <strong>standard container</strong> mà bạn muốn thay, <strong>str</strong> là đoạn kí tự mới được ghép vào trong <strong>standard container</strong>.</p>\n<p>Ví dụ:</p>\n<pre><code class=\"hljs language-cpp\"><span class=\"hljs-built_in\">string</span> my_string = <span class=\"hljs-string\">\"This string will be replaced\"</span>;\n<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; my_string &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;\n\nmy_string.replace(<span class=\"hljs-number\">20</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-string\">\"changed\"</span>);\n<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; my_string &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;</code></pre>\n<p>Nhìn vào kết quả đoạn chương trình trên và hình dung xem thử điều gì vừa diễn ra.</p>\n<p><img src=\"https://github.com/nguyenchiemminhvu/CPP-Tutorial/blob/master/6-kieu-chuoi-ki-tu/6-2-thu-vien-string-trong-CPP/4.png?raw=true\" width=\"\" height=\"\"></p>\n<p>Tại vị trí <strong>pos</strong> của string gốc, chương trình xóa đi <strong>len</strong> kí tự, và chèn <strong>str</strong> vào string gốc tại ví trí <strong>pos</strong>. Đó là cách mà phương thức <strong>replace</strong> hoạt động.</p>\n</li>\n</ul>\n\n<h5>Tìm kiếm</h5>\n\n<p>Có nhiều phương thức trong lớp string được định nghĩa cho các trường hợp tìm kiếm phức tạp. Mình chỉ hướng dẫn các bạn sử dụng phương thức <strong>find</strong> của lớp <strong>string</strong> để tìm kiếm vị trí xuất hiện của chuỗi con bên trong đối tượng mà bạn đang dùng để gọi phương thức <strong>find</strong>.</p>\n\n<p>Ví dụ mình có <strong>string</strong> dùng để lưu một số tên của các thành viên trong nhóm thực hiện tutorial này:</p>\n\n<pre><code class=\"hljs language-lsl\"><span class=\"hljs-type\">string</span> name_list = <span class=\"hljs-string\">\"Le Tran Dat<span class=\"hljs-subst\">\\n</span>Nguyen Chiem Minh Vu<span class=\"hljs-subst\">\\n</span>Ngo Doan Tuan<span class=\"hljs-subst\">\\n</span>Le Dinh Huy\"</span>;</code></pre>\n\n<p>Thử in name_list ra màn hình:</p>\n\n<p><img src=\"https://github.com/nguyenchiemminhvu/CPP-Tutorial/blob/master/6-kieu-chuoi-ki-tu/6-2-thu-vien-string-trong-CPP/5.png?raw=true\" width=\"\" height=\"\"></p>\n\n<p>Yêu cầu nhập vào một cái tên từ bàn phím và xác định xem tên đó có tồn tại trong danh sách trên hay không.</p>\n\n<p>Sau đây là một số khai báo phương thức <strong>find</strong> trong lớp <strong>string</strong> sẽ giúp các bạn giải quyết vấn đề mình vừa đặt ra.</p>\n\n<p><code>size_t find (const string&#x26; str, size_t pos = 0) const;</code></p>\n\n<p>Tìm kiếm sự xuất hiện của chuỗi con <strong>str</strong> bên trong <strong>standard container</strong> của đối tượng mà các bạn dùng để gọi phương thức <strong>find</strong>, vị trí bắt đầu tìm kiếm mặc định là 0.</p>\n\n<pre><code class=\"hljs language-applescript\"><span class=\"hljs-built_in\">string</span> <span class=\"hljs-built_in\">name</span>;\ncout &#x3C;&#x3C; <span class=\"hljs-string\">\"Enter a name: \"</span>;\ngetline(cin, <span class=\"hljs-built_in\">name</span>);\n\nint32_t search_index = name_list.find(<span class=\"hljs-built_in\">name</span>);</code></pre>\n\n<p>Nếu <code>name</code> được tìm thấy bên trong <code>name_list</code>, biến <code>search_index</code> sẽ nhận được giá trị là chỉ sổ mà <code>name</code> được tìm thấy. Nếu không được tìm thấy, biến <code>search_index</code> nhận giá trị -1.</p>\n\n<pre><code class=\"hljs language-cpp\"><span class=\"hljs-keyword\">if</span>(search_index == <span class=\"hljs-number\">-1</span>)\n\t<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; name &#x3C;&#x3C; <span class=\"hljs-string\">\" is not exist in name_list\"</span> &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;\n<span class=\"hljs-keyword\">else</span>\n\t<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"Found at: \"</span> &#x3C;&#x3C; search_index &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;</code></pre>\n\n<p>Phương thức <strong>find</strong> này dễ sử dụng hơn so với việc sử dụng hàm <strong>strstr</strong> trong thư viện <strong>cstring</strong> để tìm kiếm trong mảng kí tự.</p>\n\n<h5>So sánh 2 string</h5>\n\n<p>Phép so sánh 2 string cũng được thực hiện theo thứ tự từ điển (từ trái sang phải) giống như khi so sánh hai mảng kí tự. </p>\n\n<p><code>int compare (const string&#x26; str) const;</code></p>\n\n<p>Hoặc</p>\n\n<p><code>int compare (const char* s) const;</code></p>\n\n<p>Phương thức so sánh <strong>compare</strong> trả về một giá trị số nguyên. Tương tự như so sánh 2 mảng kí tự bằng hàm <strong>strcmp</strong>, giá trị trả về sẽ là 1 trong 3 trường hợp:</p>\n\n<ul>\n<li>\n<p>Giá trị trả về là 0:</p>\n<p>Điều này có nghĩa nội dung của hai chuỗi kí tự này hoàn toàn giống nhau. Ví dụ:</p>\n<pre><code class=\"hljs language-cpp\"><span class=\"hljs-built_in\">string</span> str1 = <span class=\"hljs-string\">\"This is a string\"</span>;\n<span class=\"hljs-built_in\">string</span> str2 = <span class=\"hljs-string\">\"This is a string\"</span>;\n\n<span class=\"hljs-keyword\">if</span>(str1.compare(str2) == <span class=\"hljs-number\">0</span>)\t{\n\t<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"str1 and str2 are equal\"</span> &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;\t\t\n}\n<span class=\"hljs-keyword\">else</span>\t{\n\t<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"str1 ans str2 are not equal\"</span> &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;\n}</code></pre>\n</li>\n<li>\n<p>Giá trị trả về nhỏ hơn 0:</p>\n<p>Điều này có nghĩa tại vị trí phát hiện cặp kí tự không tương xứng giữa str1 và str2 tạm gọi là vị trí <code>index_not_match</code>, ta có: </p>\n<p><code>str1[index_not_match] &#x3C; str[index_not_match]</code></p>\n<p>Ví dụ:</p>\n<pre><code class=\"hljs language-armasm\"><span class=\"hljs-keyword\">string </span><span class=\"hljs-keyword\">str1 </span>= <span class=\"hljs-string\">\"abcDEF\"</span><span class=\"hljs-comment\">;</span>\n<span class=\"hljs-keyword\">string </span><span class=\"hljs-keyword\">str2 </span>= <span class=\"hljs-string\">\"abcdef\"</span><span class=\"hljs-comment\">;</span></code></pre>\n<p>Khi so sánh string <code>str1</code> và string <code>str2</code> như trên bằng dòng lệnh <code>str1.compare(str2)</code>, ta nhận được giá trị trả về nhỏ hơn 0, vì tại vị trí có chỉ số là 3, kí tự <strong>'D'</strong> của <code>str1</code> có mã ASCII nhỏ hơn kí tự <strong>'d'</strong> của <code>str2</code>.</p>\n</li>\n<li>\n<p>Giá trị trả về lớn hơn 0:</p>\n<p>Ngược lại với việc giá trị trả về nhỏ hơn 0. Mình lấy lại ví dụ trên:</p>\n<pre><code class=\"hljs language-armasm\"><span class=\"hljs-keyword\">string </span><span class=\"hljs-keyword\">str1 </span>= <span class=\"hljs-string\">\"abcDEF\"</span><span class=\"hljs-comment\">;</span>\n<span class=\"hljs-keyword\">string </span><span class=\"hljs-keyword\">str2 </span>= <span class=\"hljs-string\">\"abcdef\"</span><span class=\"hljs-comment\">;</span></code></pre>\n<p>Nếu các bạn thực hiện so sánh như sau:</p>\n<pre><code class=\"hljs language-less\">str2<span class=\"hljs-selector-class\">.compare</span>(str1);</code></pre>\n<p>Giá trị trả về sẽ lớn hơn 0.</p>\n</li>\n</ul>\n\n<p>Một cách sử dụng khác của phương thức <strong>compare</strong>:</p>\n\n<p><code>int compare (size_t pos, size_t len, const string&#x26; str) const;</code></p>\n\n<p>Ví dụ:</p>\n\n<pre><code class=\"hljs language-cpp\"><span class=\"hljs-built_in\">string</span> my_string = <span class=\"hljs-string\">\"Make a comparison\"</span>;\n<span class=\"hljs-keyword\">int</span> comparison = my_string.compare(<span class=\"hljs-number\">7</span>, <span class=\"hljs-number\">10</span>, <span class=\"hljs-string\">\"comparison\"</span>);\n<span class=\"hljs-built_in\">cout</span> &#x3C;&#x3C; <span class=\"hljs-string\">\"Result of the comparison: \"</span> &#x3C;&#x3C; comparison &#x3C;&#x3C; <span class=\"hljs-built_in\">endl</span>;</code></pre>\n\n<p>Đối số <strong>pos</strong> được mình gán giá trị 7, đại diện cho vị trí bắt đầu so sánh. Tại vị trí có chỉ số 7, mình lấy ra 10 kí tự liên tiếp nhau để lần lượt so sánh với chuỗi \"comparison\" được mình truyền vào ở đối số thứ 3 trong phương thức <strong>compare</strong>.</p>\n\n<p><img src=\"https://github.com/nguyenchiemminhvu/CPP-Tutorial/blob/master/6-kieu-chuoi-ki-tu/6-2-thu-vien-string-trong-CPP/6.png?raw=true\" width=\"\" height=\"\"></p>\n\n<p>Chương trình phát hiện 2 chuỗi kí tự con này giống nhau, nên giá trị trả về là 0.</p>\n\n<h2></h2>\n\n<h3>Tổng kết</h3>\n\n<p>Kiểu dữ liệu <strong>string</strong> trong C++ hổ trợ cho chúng ta rất nhiều khi thao tác với chuỗi kí tự. Vì thế, mình ưu tiên <strong>Cpp-style string</strong> hơn việc sử dụng <strong>C-style string</strong>.</p>\n\n<p>Trong bài học này, mình chỉ mới giới thiệu cho các bạn một số khái niệm, cách sử dụng và thao tác cơ bản khi sử dụng lớp <strong>string</strong>. Vẫn còn nhiều phương thức xử lý chuỗi trong lớp string mà mình chưa đề cập đến, các bạn có thể tham khảo thêm tại địa chỉ: <br><a href=\"http://www.cplusplus.com/reference/string/string/\" class=\"onebox\" target=\"_blank\">http://www.cplusplus.com/reference/string/string/</a></p>\n\n<hr>\n\n<p><strong>Hẹn gặp lại các bạn trong bài học tiếp theo trong khóa học lập trình C++ hướng thực hành.</strong></p>\n\n<p>Mọi ý kiến đóng góp hoặc thắc mắc có thể đặt câu hỏi trực tiếp tại diễn đàn.</p>\n\n<p><a title=\"DayNhauHoc\" class=\"onebox\" target=\"_blank\">www.daynhauhoc.com</a></p>\n\n<hr>\n\n<h3>Link Videos khóa học</h3>\n\n<p><a href=\"https://www.udemy.com/c-co-ban-danh-cho-nguoi-moi-hoc-lap-trinh/learn/v4/overview\" class=\"onebox\" target=\"_blank\">https://www.udemy.com/c-co-ban-danh-cho-nguoi-moi-hoc-lap-trinh/learn/v4/overview</a></p>\n</body></html>","__filename":"generated/30092.md","__url":"/6/2-thu-vien-string-trong-c/","__resourceUrl":"/6/2-thu-vien-string-trong-c/index.html","__dataUrl":"/6/2-thu-vien-string-trong-c/index.html.bc60e8fb9e59d41ca6998c3d078ba0ee.json"}